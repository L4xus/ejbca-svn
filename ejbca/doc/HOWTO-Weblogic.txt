
CONFIGURING Weblogic
====================

In the database configured for DefaultPool and DefaultDS in Weblogic, create
tables for the entity beans, CertificateData, CRLData and UserData.

CREATE TABLE CERTIFICATEDATA
(
B64CERT          LONG,
FP                       VARCHAR2(32)      NOT NULL,
SUBJECTDN        VARCHAR2(256),
ISSUERDN         VARCHAR2(256),
SERNO            VARCHAR2(16),
STATUS           INTEGER,
TYPE             INTEGER,
CAFP             VARCHAR(32),
EXPIREDATE       NUMBER,
REVOCATIONDATE   NUMBER,
REVOCATIONREASON INTEGER,
PRIMARY KEY("FP")
);

describe CRLDATA;

CREATE TABLE CRLDATA
(
B64CRL           LONG,
FP                       VARCHAR2(32)      NOT NULL,
ISSUERDN         VARCHAR2(256),
CRLNUMBER        VARCHAR2(16),
CAFP             VARCHAR(32),
THISUPDATE       NUMBER,
NEXTUPDATE       NUMBER,
PRIMARY KEY("FP")
);

CREATE TABLE USERDATA
(
USERNAME         VARCHAR2(32) NOT NULL,
PASSWORD         VARCHAR2(32),          
PASSWORDHASH VARCHAR2(32),              
SUBJECTDN        VARCHAR2(256),
SUBJECTEMAIL VARCHAR2(128),
STATUS           INTEGER,
TYPE             INTEGER,
PRIMARY KEY("USERNAME") 
);

Don't forget to create public synonyms and access rights for your tables, or
however you organize the data...

CREATE PUBLIC SYNONYM CERTIFICATEDATA FOR EJBCA.CERTIFICATEDATA;

CREATE PUBLIC SYNONYM CRLDATA FOR EJBCA.CRLDATA;

CREATE PUBLIC SYNONYM USERDATA FOR EJBCA.USERDATA;

GRANT UPDATE, SELECT, INSERT, DELETE ON EJBCA.CERTIFICATEDATA TO HJOURNALAPP;

GRANT UPDATE, SELECT, INSERT, DELETE ON EJBCA.CRLDATA TO HJOURNALAPP;

GRANT UPDATE, SELECT, INSERT, DELETE ON EJBCA.USERDATA TO HJOURNALAPP;

Deploy the beans in weblogic, they should works straight away.