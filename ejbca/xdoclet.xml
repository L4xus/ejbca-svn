<project name="xdoclet" basedir="." default="xdoclet:run">

	<property name="xdoclet.lib.dir" location="lib/xdoclet-1.2.1/lib"/>
	<path id="xdoclet.classpath">
		<fileset dir="${xdoclet.lib.dir}" includes="*.jar"/>
		<fileset dir="lib" includes="*.jar"/>
		<fileset dir="lib/ext" includes="*.jar"/>
	</path>
	<taskdef name="ejbdoclet" classname="xdoclet.modules.ejb.EjbDocletTask">
		<classpath refid="xdoclet.classpath"/>
	</taskdef>

	<target name="xdoclet:run">
		<mkdir dir="bin/gensrc"/>
		<property name="tmp" location="dist/xdoclet"/>
		<ejb-doclet dir="src/java" todir="bin/gensrc"/>
		<!--antcall target="xdoclet:keyrecovery"/>
		<antcall target="xdoclet:authorization"/>
		<antcall target="xdoclet:log"/>
		<antcall target="xdoclet:hardtoken"/>
		<antcall target="xdoclet:ra"/>
		<antcall target="xdoclet:ca"/-->
	</target>

    <macrodef name="ejb-doclet">
        <attribute name="dir"/>
        <attribute name="todir"/>
        <sequential>
		<mkdir dir="@{todir}"/>
		<ejbdoclet
			destdir="@{todir}"
			ejbspec="2.0"
			excludedtags="@version,@author"
			force="true">
			<fileset dir="@{dir}" includes="**/*Bean.java"/>
			<!--dataobject/-->
			<remoteinterface/>
			<homeinterface/>
			<localinterface/>
			<localhomeinterface/>
			<entitypk/>
<!--			<entitycmp/>-->
            <jboss
                version="3.2"
                unauthenticatedPrincipal="nobody"
                xmlencoding="UTF-8"
                validatexml="false"
                datasource="java:/${datasource.jndi-name}"
                datasourcemapping="Hypersonic SQL"
                />
            <jonas
                version="4.0"
                xmlencoding="UTF-8"
                validatexml="false"
                defaultentityjndiname="${datasource.jndi-name}"
                />            
			<deploymentdescriptor/>
		</ejbdoclet>
		</sequential>
	</macrodef>
</project>